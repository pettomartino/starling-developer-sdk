{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/entities/account.js","src/entities/address.js","src/entities/card.js","src/entities/contact.js","src/entities/customer.js","src/entities/mandate.js","src/entities/oauth.js","src/entities/payment.js","src/entities/savingsGoals.js","src/entities/transaction.js","src/entities/whoAmI.js","src/starling.js","src/utils/http.js","src/utils/validator.js"],"names":[],"mappings":"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","file":"starling.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:account-service');\n\n/**\n * Service to interact with a customer's account\n */\nclass Account {\n\n  /**\n   * Creates an instance of the account client\n   * @param {Object} options - application config\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's account\n   * @param {string} accessToken - the oauth bearer token\n   * @return {Promise} - the http request promise\n   */\n  getAccount (accessToken) {\n    typeValidation(arguments, getAccountParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/accounts`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Retrieves the customer's balance\n   * @param {string} accessToken - the oauth bearer token\n   * @return {Promise} - the http request promise\n   */\n  getBalance (accessToken) {\n    typeValidation(arguments, getBalanceParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/accounts/balance`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getAccountParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nconst getBalanceParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Account;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:address-service');\n\n/**\n * Service to interact with a customer address\n */\nclass Address {\n\n  /**\n   * Creates an instance of the address client\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's address\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getAddresses (accessToken) {\n    typeValidation(arguments, getAddressParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/addresses`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getAddressParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Address;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:card-service');\n\n/**\n * Service to interact with a customer card\n */\nclass Card {\n\n  /**\n   * Creates an instance of the client's card\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's card\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getCard (accessToken) {\n    typeValidation(arguments, getCardParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/cards`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getCardParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Card;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders, postHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:contact-service');\n\n/**\n * Service to interact with a customer's contacts (payees)\n */\nclass Contact {\n\n  /**\n   * Create a new contact service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's contacts (payees)\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getContacts (accessToken) {\n    typeValidation(arguments, getContactsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets a specific contact's (payee) account details\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the contact's ID.\n   * @return {Promise} - the http request promise\n   */\n  getContactAccount (accessToken, contactId) {\n    typeValidation(arguments, getContactAccountParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts/${contactId}/accounts`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} name - the name of the new contact.\n   * @param {string} accountType - the account type (domestic or international).\n   * @param {string} accountNumber - the contact's bank account number.\n   * @param {string} sortCode - the contact's sort code.\n   * @param {string} customerId - the customer's ID. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createContact (accessToken, name, accountType, accountNumber, sortCode, customerId) {\n    typeValidation(arguments, createContactParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts`;\n    log(`POST ${url}`);\n    return axios({\n      method: 'POST',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        name,\n        accountType,\n        accountNumber,\n        sortCode,\n        customerId\n      }),\n    });\n  }\n\n\n  /**\n   * Deletes a specific contact (payee) from the customer's account\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the Identifier of the contact to be deleted.\n   * @return {Promise} - the http request promise\n   */\n  deleteContact (accessToken, contactId) {\n    typeValidation(arguments, deleteContactParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts/${contactId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken),\n    });\n  }\n}\n\nconst getContactsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nconst getContactAccountParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'contactId', validations: ['required', 'string']}\n  ];\n\nconst createContactParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'name', validations: ['required', 'string']},\n  {name: 'accountType', validations: ['required', 'string']},\n  {name: 'accountNumber', validations: ['required', 'string']},\n  {name: 'sortCode', validations: ['required', 'string']},\n  {name: 'customerId', validations: ['optional', 'string']}\n  ];\n\nconst deleteContactParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'contactId', validations: ['required', 'string']}\n];\n\nmodule.exports = Contact;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:customer-service');\n\n/**\n * Service to interact with a customer\n */\nclass Customer {\n\n  /**\n   * Create a new customer service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's details\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getCustomer (accessToken) {\n    typeValidation(arguments, getCustomerParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/customers`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getCustomerParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Customer;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:mandate-service');\n\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Mandate {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets a list of the customer's current direct debit mandates\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listMandates (accessToken) {\n    typeValidation(arguments, listMandatesParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/direct-debit/mandates`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} mandateId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteMandate (accessToken, mandateId) {\n    typeValidation(arguments, deleteMandateParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/direct-debit/mandates/${mandateId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst listMandatesParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n];\n\nconst deleteMandateParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'mandateId', validations: ['required', 'string']}\n];\n\nmodule.exports = Mandate;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {typeValidation} from '../utils/validator';\n\nconst ACCESS_TOKEN_GRANT_TYPE = 'authorization_code';\nconst REFRESH_TOKEN_GRANT_TYPE = 'refresh_token';\n\nconst log = debug('starling:oauth-service');\n\n/**\n * Service to interact with a the oauth endpoint\n */\nclass OAuth {\n\n  /**\n   * Create a new oauth service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} authorizationCode - the authorization code, acquired from the user agent after the\n   * user authenticates with starling\n   * @return {Promise} - the http request promise\n   */\n  getAccessToken (authorizationCode) {\n    typeValidation(arguments, authorizationCodeParameterDefinition);\n    return this.getOAuthToken({\n      'code': authorizationCode,\n      'grant_type': ACCESS_TOKEN_GRANT_TYPE,\n      'client_id': this.options.clientId,\n      'client_secret': this.options.clientSecret,\n      'redirect_uri': this.options.redirectUri\n    });\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} refreshToken - the oauth refresh token, used when the access token\n   * expires to claim a new access token.\n   * @return {Promise} - the http request promise\n   */\n  refreshAccessToken (refreshToken) {\n    typeValidation(arguments, refreshTokenParameterDefinition);\n    return this.getOAuthToken({\n      'refresh_token': refreshToken,\n      'grant_type': REFRESH_TOKEN_GRANT_TYPE,\n      'client_id': this.options.clientId,\n      'client_secret': this.options.clientSecret\n    });\n  }\n\n  /**\n   * Gets the access token from the starling oauth endpoint\n   * @param {object} params - the query params passed to the oauth endpoint as per the oauth spec\n   * @return {Promise} - the http request promise\n   */\n  getOAuthToken (params) {\n    if (!this.options.clientId) {\n      throw Error('clientId is not configured');\n    }\n\n    if (!this.options.clientSecret) {\n      throw Error('clientSecret is not configured');\n    }\n\n    const url = `${this.options.oauthUrl}/oauth/access-token`;\n    log(`POST ${url} queryParams:${JSON.stringify(params)}`);\n\n    return axios({\n      url,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Accept: 'application/json'\n      },\n      params: params\n    });\n  }\n}\n\nconst refreshTokenParameterDefinition = [\n  {name: 'refreshToken', validations: ['required', 'string']}\n];\n\nconst authorizationCodeParameterDefinition = [\n  {name: 'authorizationCode', validations: ['required', 'string']}\n];\n\nmodule.exports = OAuth;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders, postHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:payment-service');\n\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Payment {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Makes a payment on behalf of the customer to another UK bank account using the Faster Payments network\n   * @param {string} accessToken - the oauth bearer token.\n   *  @param {string} destinationAccountUid - the account identifier of the recipient\n   * @param {string} reference - The payment reference, max. 18 characters.\n   * @param {string} amount - the amount to be send.\n   * @param {string=} currency - the currency, optional, defaults to \"GBP\".\n   * @return {Promise} - the http request promise\n   */\n  makeLocalPayment (accessToken, destinationAccountUid, reference, amount, currency) {\n    typeValidation(arguments, makeLocalPaymentParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/local`;\n    log(`POST ${url}`);\n    return axios({\n      method: 'POST',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        destinationAccountUid,\n        payment: {\n          amount,\n          currency\n        },\n        reference\n      })\n    });\n  }\n\n\n  /**\n   * Lists the customer's scheduled payments\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listScheduledPayments (accessToken) {\n    typeValidation(arguments, listScheduledPaymentsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/scheduled`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst makeLocalPaymentParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'destinationAccountUid', validations: ['required', 'string']},\n  {name: 'reference', validations: ['required', 'string']},\n  {name: 'amount', validations: ['required', 'string']},\n  {name: 'currency', validations: ['optional', 'string']}\n];\n\nconst listScheduledPaymentsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n];\n\nmodule.exports = Payment;\n","import axios from 'axios';\nimport debug from 'debug';\nimport { defaultHeaders, postHeaders } from '../utils/http';\nimport { typeValidation } from '../utils/validator';\n\nconst log = debug('starling:saving-goals-service');\n\n/**\n * Service to interact with a customer's savings goals\n */\nclass SavingsGoals {\n  /**\n   * Create a new savings goal service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets a list of the customer's savings goals\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listSavingsGoals (accessToken) {\n    typeValidation(arguments, listSavingsGoalsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @return {Promise} - the http request promise\n   */\n  getSavingsGoal (accessToken, savingsGoalId) {\n    typeValidation(arguments, getSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Creates a savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID, generate one if creating a goal.\n   * @param {string} name - the name of the new contact.\n   * @param {string} currency - the currency of the savings goal. Defaults to 'GBP'.\n   * @param {number} targetAmount - the target amount in minor units (e.g. 1234 => £12.34).\n   * @param {string} targetCurrency - the target currency, also defaults to 'GBP'.\n   * @param {string} base64EncodedPhoto - base64 encoded image to associate with the goal. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createSavingsGoal (accessToken, savingsGoalId, name, currency, targetAmount, targetCurrency, base64EncodedPhoto) {\n    typeValidation(arguments, createSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`PUT ${url}`);\n    return axios({\n      method: 'PUT',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        name,\n        currency,\n        target: {\n          targetAmount,\n          targetCurrency\n        },\n        base64EncodedPhoto\n      })\n    });\n  }\n\n  /**\n   * Deletes specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteSavingsGoal (accessToken, savingsGoalId) {\n    typeValidation(arguments, deleteSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Add money to a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @param {string} transactionId - a transaction ID for this transaction\n   * @param {number} amount - an amount in minor unit\n   * @return {Promise} - the http request promise\n   */\n  addMoneyToSavingsGoal (accessToken, savingsGoalId, transactionId, amount, currency) {\n    typeValidation(arguments, addMoneySavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}/add-money/${transactionId}`;\n    log(`PUT ${url}`);\n    return axios({\n      method: 'PUT',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        amount: {\n          currency,\n          minorUnits: amount\n        }\n      })\n    });\n  }\n}\n\nconst listSavingsGoalsParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] }\n];\n\nconst getSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] }\n];\n\nconst deleteSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] }\n];\n\nconst createSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] },\n  { name: 'name', validations: [ 'required', 'string' ] },\n  { name: 'currency', validations: [ 'required', 'string' ] },\n  { name: 'targetAmount', validations: [ 'optional', 'number' ] },\n  { name: 'targetCurrency', validations: [ 'optional', 'string' ] },\n  { name: 'base64EncodedPhoto', validations: [ 'optional', 'string' ] }\n];\n\nconst addMoneySavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] },\n  { name: 'transactionId', validations: [ 'required', 'string' ] },\n  { name: 'amount', validations: [ 'required', 'number' ] },\n];\n\nmodule.exports = SavingsGoals;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:transaction-service');\n\nconst transactionSource = (source) => {\n  if (source === 'MASTER_CARD') {\n    return '/mastercard';\n  } else if (source === 'FASTER_PAYMENTS_IN') {\n    return '/fps/in';\n  } else if (source === 'FASTER_PAYMENTS_OUT') {\n    return '/fps/out';\n  } else if (source === 'DIRECT_DEBIT') {\n    return '/direct-debit';\n  } else {\n    return ''\n  }\n};\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Transaction {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's transactions over the given period\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} fromDate - filter transactions after this date. Format: YYYY-MM-DD\n   * @param {string} toDate - filter transactions before this date. Format: YYYY-MM-DD\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, results are not filtered by source.\n   * @return {Promise} - the http request promise\n   */\n  getTransactions (accessToken, fromDate, toDate, source) {\n    typeValidation(arguments, getTransactionsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/transactions${transactionSource(source)}`;\n    log(`GET ${url} from=${fromDate} to=${toDate}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      params: {\n        from: fromDate,\n        to: toDate\n      },\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets the full details of a single transaction\n   * @param {string} accessToken - the oauth bearer token\n   * @param {string} transactionId - the unique transaction ID\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, only generic transaction information will be returned.\n   * @return {Promise} - the http request promise\n   */\n  getTransaction (accessToken, transactionId, source) {\n    typeValidation(arguments, getTransactionParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/transactions${transactionSource(source)}/${transactionId}`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getTransactionsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'fromDate', validations: ['optional', 'string']},\n  {name: 'toDate', validations: ['optional', 'string']},\n  {name: 'source', validations: ['optional', 'string']}\n];\n\nconst getTransactionParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'transactionId', validations: ['required', 'string']},\n  {name: 'source', validations: ['optional', 'string']}\n];\n\nmodule.exports = Transaction;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:who-am-i-service');\n\n/**\n * Service to interact with the Who Am I endpoint\n */\nclass WhoAmI {\n\n  /**\n   * Creates an instance of the who am I client\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves the customer UUID and permissions corresponding to the access token passed\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getMe (accessToken) {\n    typeValidation(arguments, getMeParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/me`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getMeParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = WhoAmI;\n","import Customer from './entities/customer';\nimport Account from './entities/account';\nimport Address from './entities/address';\nimport Transaction from './entities/transaction';\nimport Card from './entities/card';\nimport OAuth from './entities/oauth';\nimport Contact from './entities/contact';\nimport Payment from './entities/payment';\nimport Mandate from './entities/mandate';\nimport SavingsGoals from './entities/savingsGoals';\nimport WhoAmI from './entities/whoAmI';\n\n/**\n * Facade to dispatch operations to services\n */\nclass Starling {\n\n  /**\n   * Create an instance of the starling client\n   * @param {Object=} options - configuration parameters\n   */\n  constructor (options) {\n    const defaults = {\n      apiUrl: 'https://api.starlingbank.com',\n      oauthUrl: 'https://oauth.starlingbank.com',\n      clientId: '',\n      clientSecret: ''\n    };\n\n    this.config = Object.assign({}, defaults, options);\n\n    this.whoAmI = new WhoAmI(this.config);\n    this.customer = new Customer(this.config);\n    this.account = new Account(this.config);\n    this.address = new Address(this.config);\n    this.transaction = new Transaction(this.config);\n    this.payment = new Payment(this.config);\n    this.mandate = new Mandate(this.config);\n    this.contact = new Contact(this.config);\n    this.card = new Card(this.config);\n    this.savingsGoals = new SavingsGoals(this.config);\n    this.oAuth = new OAuth(this.config);\n  }\n\n  /**\n   * Gets the customer UUID and permissions corresponding to the access token passed\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getMe (accessToken = this.config.accessToken) {\n    return this.whoAmI.getMe(accessToken);\n  }\n\n  /**\n   * Gets the customer's details\n   * @param {string=} accessToken - the oauth bearer token. If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getCustomer (accessToken = this.config.accessToken) {\n    return this.customer.getCustomer(accessToken);\n  }\n\n  /**\n   * Gets the customer's account details\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getAccount (accessToken = this.config.accessToken) {\n    return this.account.getAccount(accessToken);\n  }\n\n  /**\n   * Gets the customer's balance\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getBalance (accessToken = this.config.accessToken) {\n    return this.account.getBalance(accessToken);\n  }\n\n  /**\n   * Gets the customer's addresses (current and previous)\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getAddresses (accessToken = this.config.accessToken) {\n    return this.address.getAddresses(accessToken);\n  }\n\n  /**\n   * Gets the customer's transaction history\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @param {string} fromDate - filter transactions after this date. Format: YYYY-MM-DD (optional,\n   *   defaults to most recent 100 transactions)\n   * @param {string} toDate - filter transactions before this date. Format: YYYY-MM-DD (optional,\n   *   defaults to current date if not provided)\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, results are not filtered by source.\n   * @return {Promise} - the http request promise\n   */\n  getTransactions (accessToken = this.config.accessToken, fromDate, toDate, source) {\n    return this.transaction.getTransactions(accessToken, fromDate, toDate, source);\n  }\n\n  /**\n   * Gets the full details of a single transaction\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @param {string} transactionId - the unique transaction ID\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, only generic transaction information will be returned.\n   * @return {Promise} - the http request promise\n   */\n  getTransaction (accessToken = this.config.accessToken, transactionId, source) {\n    return this.transaction.getTransaction(accessToken, transactionId, source);\n  }\n\n  /**\n   * Gets the customer's current direct-debit mandates\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  listMandates (accessToken = this.config.accessToken) {\n    return this.mandate.listMandates(accessToken);\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} mandateId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteMandate (accessToken = this.config.accessToken, mandateId) {\n    return this.mandate.deleteMandate(accessToken, mandateId);\n  }\n\n  /**\n   * Lists the customer's scheduled payments\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listScheduledPayments (accessToken = this.config.accessToken) {\n    return this.payment.listScheduledPayments(accessToken);\n  }\n\n  /**\n   * Makes a payment on behalf of the customer to another UK bank account using the Faster Payments network\n   * @param {string} accessToken - the oauth bearer token.\n   *  @param {string} destinationAccountUid - the account identifier of the recipient\n   * @param {string} reference - The payment reference, max. 18 characters.\n   * @param {string} amount - the amount to be send.\n   * @param {string=} currency - the currency, optional, defaults to \"GBP\".\n   * @return {Promise} - the http request promise\n   */\n  makeLocalPayment (accessToken = this.config.accessToken, destinationAccountUid, reference, amount, currency = 'GBP') {\n    return this.payment.makeLocalPayment(accessToken, destinationAccountUid, reference, amount, currency);\n  }\n\n  /**\n   * Gets the customer's contacts (payees)\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getContacts (accessToken = this.config.accessToken) {\n    return this.contact.getContacts(accessToken);\n  }\n\n  /**\n   * Gets a specific contact (payee)\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the contact's ID.\n   * @return {Promise} - the http request promise\n   */\n  getContactAccount (accessToken = this.config.accessToken, contactId) {\n    return this.contact.getContactAccount(accessToken, contactId);\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} name - the name of the new contact.\n   * @param {string=} accountType - the account type (domestic or international), optional and defaults to\n   *   UK_ACCOUNT_AND_SORT_CODE.\n   * @param {string} accountNumber - the contact's bank account number.\n   * @param {string} sortCode - the contact's sort code.\n   * @param {string} customerId - the customer's ID.\n   * @return {Promise} - the http request promise\n   */\n  createContact (accessToken = this.config.accessToken, name, accountType = 'UK_ACCOUNT_AND_SORT_CODE', accountNumber, sortCode, customerId) {\n    return this.contact.createContact(accessToken, name, accountType, accountNumber, sortCode, customerId);\n  }\n\n  deleteContact (accessToken, contactId) {\n    return this.contact.deleteContact(accessToken, contactId);\n  }\n\n  /**\n   * Gets a list of the customer's savings goals\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listSavingsGoals (accessToken = this.config.accessToken) {\n    return this.savingsGoals.listSavingsGoals(accessToken);\n  }\n\n  /**\n   * Gets a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @return {Promise} - the http request promise\n   */\n  getSavingsGoal (accessToken = this.config.accessToken, savingsGoalId) {\n    return this.savingsGoals.getSavingsGoal(accessToken, savingsGoalId);\n  }\n\n  /**\n   * Add money to a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @param {string} transactionId - a transaction ID for this transaction\n   * @param {number} amount - an amount in minor unit\n   * @return {Promise} - the http request promise\n   */\n  addMoneyToSavingsGoal (accessToken = this.config.accessToken, savingsGoalId, transactionId, amount, currency = 'GBP') {\n    return this.savingsGoals.addMoneyToSavingsGoal(\n      accessToken,\n      savingsGoalId,\n      transactionId,\n      amount,\n      currency\n    );\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID, generate one if creating a goal.\n   * @param {string} name - the name of the new contact.\n   * @param {string} currency - the currency of the savings goal. Defaults to 'GBP'.\n   * @param {number} targetAmount - the target amount in minor units (e.g. 1234 => £12.34).\n   * @param {string} targetCurrency - the target currency, also defaults to 'GBP'.\n   * @param {string} base64EncodedPhoto - base64 encoded image to associate with the goal. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createSavingsGoal (accessToken = this.config.accessToken, savingsGoalId, name, currency = 'GBP',  targetAmount, targetCurrency = 'GBP', base64EncodedPhoto) {\n    return this.savingsGoals.createSavingsGoal(accessToken, savingsGoalId, name, currency,  targetAmount, targetCurrency, base64EncodedPhoto);\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteSavingsGoal (accessToken, savingsGoalId) {\n    return this.savingsGoals.deleteSavingsGoal(accessToken, savingsGoalId);\n  }\n\n  /**\n   * Gets the customer's card\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getCard (accessToken = this.config.accessToken) {\n    return this.card.getCard(accessToken);\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} authorizationCode - the authorization code, acquired from the user agent after the\n   * user authenticates with starling\n   * @return {Promise} - the http request promise\n   */\n  getAccessToken (authorizationCode) {\n    return this.oAuth.getAccessToken(authorizationCode);\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} refreshToken - the oauth refresh token, used to claim a new access token when the access token\n   * expires. A new refresh token is also returned.\n   * @return {Promise} - the http request promise\n   */\n  refreshAccessToken (refreshToken) {\n    return this.oAuth.refreshAccessToken(refreshToken);\n  }\n}\n\nmodule.exports = Starling;\n","export const defaultHeaders = (accessToken) => {\n  return {\n    Accept: 'application/json',\n    Authorization: `Bearer ${accessToken}`\n  };\n};\n\nexport const postHeaders = (accessToken) => {\n  return {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${accessToken}`\n  };\n};","\nconst runRules = (pos, name, rules, value) => {\n  const valueType = typeof value;\n\n  if (rules[0] == 'optional') {\n    if (value && (valueType !== rules[1])) {\n      return `${name} parameter in position ${pos} is an optional ${rules[1]} but was ${valueType}`\n    }\n  }\n  if (rules[0] == 'required') {\n    if (value && (valueType !== rules[1])) {\n      return `${name} parameter in position ${pos} is a required ${rules[1]} but was ${valueType}`\n    } else if (!value) {\n      return `${name} parameter in position ${pos} is a required ${rules[1]} but was ${value}`\n    }\n  }\n};\n\nexport const  typeValidation = (args, def) => {\n  let problems = [];\n  for (let i = 0; i < def.length; i++) {\n    const pos = i;\n    const name = def[i].name;\n    const rules = def[i].validations;\n    const value = i <= args.length ? args[i] : undefined;\n    const problem = runRules(pos, name, rules, value);\n    if (problem) problems.push(problem);\n  }\n\n  if (problems.length) {\n    throw problems;\n  }\n\n};\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZW50aXRpZXMvYWNjb3VudC5qcyIsInNyYy9lbnRpdGllcy9hZGRyZXNzLmpzIiwic3JjL2VudGl0aWVzL2NhcmQuanMiLCJzcmMvZW50aXRpZXMvY29udGFjdC5qcyIsInNyYy9lbnRpdGllcy9jdXN0b21lci5qcyIsInNyYy9lbnRpdGllcy9tYW5kYXRlLmpzIiwic3JjL2VudGl0aWVzL29hdXRoLmpzIiwic3JjL2VudGl0aWVzL3BheW1lbnQuanMiLCJzcmMvZW50aXRpZXMvc2F2aW5nc0dvYWxzLmpzIiwic3JjL2VudGl0aWVzL3RyYW5zYWN0aW9uLmpzIiwic3JjL2VudGl0aWVzL3dob0FtSS5qcyIsInNyYy9zdGFybGluZy5qcyIsInNyYy91dGlscy9odHRwLmpzIiwic3JjL3V0aWxzL3ZhbGlkYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNLQSxNQUFNLE1BQU0scUJBQU0sMEJBQU4sQ0FBWjs7QUFFQTs7OztNQUdNLE87O0FBRUo7Ozs7QUFJQSxxQkFBYSxPQUFiLEVBQXNCO0FBQUE7O0FBQ3BCLFdBQUssT0FBTCxHQUFlLE9BQWY7QUFDRDs7QUFFRDs7Ozs7Ozs7O2lDQUtZLFcsRUFBYTtBQUN2Qix1Q0FBZSxTQUFmLEVBQTBCLDZCQUExQjtBQUNBLFlBQU0sTUFBUyxLQUFLLE9BQUwsQ0FBYSxNQUF0QixxQkFBTjtBQUNBLHFCQUFXLEdBQVg7O0FBRUEsZUFBTyxxQkFBTTtBQUNYLGtCQUFRLEtBREc7QUFFWCxrQkFGVztBQUdYLG1CQUFTLDBCQUFlLFdBQWY7QUFIRSxTQUFOLENBQVA7QUFLRDs7O2lDQU9XLFcsRUFBYTtBQUN2Qix1Q0FBZSxTQUFmLEVBQTBCLDZCQUExQjtBQUNBLFlBQU0sTUFBUyxLQUFLLE9BQUwsQ0FBYSxNQUF0Qiw2QkFBTjtB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LEdBQXhDLHdCQUE4RCxNQUFNLENBQU4sQ0FBOUQsaUJBQWtGLFNBQWxGO0FBQ0Q7QUFDRjtBQUNELFFBQUksTUFBTSxDQUFOLEtBQVksVUFBaEIsRUFBNEI7QUFDMUIsVUFBSSxTQUFVLGNBQWMsTUFBTSxDQUFOLENBQTVCLEVBQXVDO0FBQ3JDLGVBQVUsSUFBViwrQkFBd0MsR0FBeEMsdUJBQTZELE1BQU0sQ0FBTixDQUE3RCxpQkFBaUYsU0FBakY7QUFDRCxPQUZELE1BRU8sSUFBSSxDQUFDLEtBQUwsRUFBWTtBQUNqQixlQUFVLElBQVYsK0JBQXdDLEdBQXhDLHVCQUE2RCxNQUFNLENBQU4sQ0FBN0QsaUJBQWlGLEtBQWpGO0FBQ0Q7QUFDRjtBQUNGLEdBZkQ7O0FBaUJPLE1BQU8sMENBQWlCLFNBQWpCLGNBQWlCLENBQUMsSUFBRCxFQUFPLEdBQVAsRUFBZTtBQUM1QyxRQUFJLFdBQVcsRUFBZjtBQUNBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxJQUFJLE1BQXhCLEVBQWdDLEdBQWhDLEVBQXFDO0FBQ25DLFVBQU0sTUFBTSxDQUFaO0FBQ0EsVUFBTSxPQUFPLElBQUksQ0FBSixFQUFPLElBQXBCO0FBQ0EsVUFBTSxRQUFRLElBQUksQ0FBSixFQUFPLFdBQXJCO0FBQ0EsVUFBTSxRQUFRLEtBQUssS0FBSyxNQUFWLEdBQW1CLEtBQUssQ0FBTCxDQUFuQixHQUE2QixTQUEzQztBQUNBLFVBQU0sVUFBVSxTQUFTLEdBQVQsRUFBYyxJQUFkLEVBQW9CLEtBQXBCLEVBQTJCLEtBQTNCLENBQWhCO0FBQ0EsVUFBSSxPQUFKLEVBQWEsU0FBUyxJQUFULENBQWMsT0FBZDtBQUNkOztBQUVELFFBQUksU0FBUyxNQUFiLEVBQXFCO0FBQ25CLFlBQU0sUUFBTjtBQUNEO0FBRUYsR0FmTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6YWNjb3VudC1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIncyBhY2NvdW50XG4gKi9cbmNsYXNzIEFjY291bnQge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBhY2NvdW50IGNsaWVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGFwcGxpY2F0aW9uIGNvbmZpZ1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIGN1c3RvbWVyJ3MgYWNjb3VudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRBY2NvdW50IChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0QWNjb3VudFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9hY2NvdW50c2A7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgY3VzdG9tZXIncyBiYWxhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEJhbGFuY2UgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRCYWxhbmNlUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL2FjY291bnRzL2JhbGFuY2VgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRBY2NvdW50UGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5jb25zdCBnZXRCYWxhbmNlUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFjY291bnQ7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnN9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHt0eXBlVmFsaWRhdGlvbn0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdG9yJztcblxuY29uc3QgbG9nID0gZGVidWcoJ3N0YXJsaW5nOmFkZHJlc3Mtc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyIGFkZHJlc3NcbiAqL1xuY2xhc3MgQWRkcmVzcyB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGFkZHJlc3MgY2xpZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGEgY3VzdG9tZXIncyBhZGRyZXNzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRBZGRyZXNzZXMgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRBZGRyZXNzUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL2FkZHJlc3Nlc2A7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGdldEFkZHJlc3NQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG4gIF07XG5cbm1vZHVsZS5leHBvcnRzID0gQWRkcmVzcztcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6Y2FyZC1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIgY2FyZFxuICovXG5jbGFzcyBDYXJkIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgY2xpZW50J3MgY2FyZFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIGN1c3RvbWVyJ3MgY2FyZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q2FyZCAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldENhcmRQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY2FyZHNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRDYXJkUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhcmQ7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnMsIHBvc3RIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzpjb250YWN0LXNlcnZpY2UnKTtcblxuLyoqXG4gKiBTZXJ2aWNlIHRvIGludGVyYWN0IHdpdGggYSBjdXN0b21lcidzIGNvbnRhY3RzIChwYXllZXMpXG4gKi9cbmNsYXNzIENvbnRhY3Qge1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgY29udGFjdCBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyBjb250YWN0cyAocGF5ZWVzKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q29udGFjdHMgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRDb250YWN0c1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9jb250YWN0c2A7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzcGVjaWZpYyBjb250YWN0J3MgKHBheWVlKSBhY2NvdW50IGRldGFpbHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RJZCAtIHRoZSBjb250YWN0J3MgSUQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRDb250YWN0QWNjb3VudCAoYWNjZXNzVG9rZW4sIGNvbnRhY3RJZCkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0Q29udGFjdEFjY291bnRQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY29udGFjdHMvJHtjb250YWN0SWR9L2FjY291bnRzYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb250YWN0IChwYXllZSkgZm9yIHRoZSBjdXN0b21lclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY291bnRUeXBlIC0gdGhlIGFjY291bnQgdHlwZSAoZG9tZXN0aWMgb3IgaW50ZXJuYXRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50TnVtYmVyIC0gdGhlIGNvbnRhY3QncyBiYW5rIGFjY291bnQgbnVtYmVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc29ydENvZGUgLSB0aGUgY29udGFjdCdzIHNvcnQgY29kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGN1c3RvbWVySWQgLSB0aGUgY3VzdG9tZXIncyBJRC4gKG9wdGlvbmFsKVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgY3JlYXRlQ29udGFjdCAoYWNjZXNzVG9rZW4sIG5hbWUsIGFjY291bnRUeXBlLCBhY2NvdW50TnVtYmVyLCBzb3J0Q29kZSwgY3VzdG9tZXJJZCkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgY3JlYXRlQ29udGFjdFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9jb250YWN0c2A7XG4gICAgbG9nKGBQT1NUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzKGFjY2Vzc1Rva2VuKSxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWNjb3VudFR5cGUsXG4gICAgICAgIGFjY291bnROdW1iZXIsXG4gICAgICAgIHNvcnRDb2RlLFxuICAgICAgICBjdXN0b21lcklkXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYSBzcGVjaWZpYyBjb250YWN0IChwYXllZSkgZnJvbSB0aGUgY3VzdG9tZXIncyBhY2NvdW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0SWQgLSB0aGUgSWRlbnRpZmllciBvZiB0aGUgY29udGFjdCB0byBiZSBkZWxldGVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZGVsZXRlQ29udGFjdCAoYWNjZXNzVG9rZW4sIGNvbnRhY3RJZCkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZGVsZXRlQ29udGFjdFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9jb250YWN0cy8ke2NvbnRhY3RJZH1gO1xuICAgIGxvZyhgREVMRVRFICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pLFxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGdldENvbnRhY3RzUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5jb25zdCBnZXRDb250YWN0QWNjb3VudFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnY29udGFjdElkJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG4gIF07XG5cbmNvbnN0IGNyZWF0ZUNvbnRhY3RQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ25hbWUnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnYWNjb3VudFR5cGUnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnYWNjb3VudE51bWJlcicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdzb3J0Q29kZScsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdjdXN0b21lcklkJywgdmFsaWRhdGlvbnM6IFsnb3B0aW9uYWwnLCAnc3RyaW5nJ119XG4gIF07XG5cbmNvbnN0IGRlbGV0ZUNvbnRhY3RQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2NvbnRhY3RJZCcsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb250YWN0O1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzpjdXN0b21lci1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXJcbiAqL1xuY2xhc3MgQ3VzdG9tZXIge1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgY3VzdG9tZXIgc2VydmljZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgZGV0YWlsc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q3VzdG9tZXIgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRDdXN0b21lclBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9jdXN0b21lcnNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRDdXN0b21lclBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxubW9kdWxlLmV4cG9ydHMgPSBDdXN0b21lcjtcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6bWFuZGF0ZS1zZXJ2aWNlJyk7XG5cblxuLyoqXG4gKiBTZXJ2aWNlIHRvIGludGVyYWN0IHdpdGggYSBjdXN0b21lcidzIHRyYW5zYWN0aW9uc1xuICovXG5jbGFzcyBNYW5kYXRlIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGxpc3Qgb2YgdGhlIGN1c3RvbWVyJ3MgY3VycmVudCBkaXJlY3QgZGViaXQgbWFuZGF0ZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGxpc3RNYW5kYXRlcyAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGxpc3RNYW5kYXRlc1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9kaXJlY3QtZGViaXQvbWFuZGF0ZXNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBzcGVjaWZpYyBkaXJlY3QgZGViaXQgbWFuZGF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFuZGF0ZUlkIC0gdGhlIHVuaXF1ZSBtYW5kYXRlIElEXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBkZWxldGVNYW5kYXRlIChhY2Nlc3NUb2tlbiwgbWFuZGF0ZUlkKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBkZWxldGVNYW5kYXRlUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL2RpcmVjdC1kZWJpdC9tYW5kYXRlcy8ke21hbmRhdGVJZH1gO1xuICAgIGxvZyhgREVMRVRFICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgbGlzdE1hbmRhdGVzUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuXTtcblxuY29uc3QgZGVsZXRlTWFuZGF0ZVBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnbWFuZGF0ZUlkJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hbmRhdGU7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IEFDQ0VTU19UT0tFTl9HUkFOVF9UWVBFID0gJ2F1dGhvcml6YXRpb25fY29kZSc7XG5jb25zdCBSRUZSRVNIX1RPS0VOX0dSQU5UX1RZUEUgPSAncmVmcmVzaF90b2tlbic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzpvYXV0aC1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgdGhlIG9hdXRoIGVuZHBvaW50XG4gKi9cbmNsYXNzIE9BdXRoIHtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IG9hdXRoIHNlcnZpY2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGNoYW5nZXMgdGhlIGF1dGhvcml6YXRpb24gY29kZSBmb3IgYW4gYWNjZXNzIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRob3JpemF0aW9uQ29kZSAtIHRoZSBhdXRob3JpemF0aW9uIGNvZGUsIGFjcXVpcmVkIGZyb20gdGhlIHVzZXIgYWdlbnQgYWZ0ZXIgdGhlXG4gICAqIHVzZXIgYXV0aGVudGljYXRlcyB3aXRoIHN0YXJsaW5nXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRBY2Nlc3NUb2tlbiAoYXV0aG9yaXphdGlvbkNvZGUpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGF1dGhvcml6YXRpb25Db2RlUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T0F1dGhUb2tlbih7XG4gICAgICAnY29kZSc6IGF1dGhvcml6YXRpb25Db2RlLFxuICAgICAgJ2dyYW50X3R5cGUnOiBBQ0NFU1NfVE9LRU5fR1JBTlRfVFlQRSxcbiAgICAgICdjbGllbnRfaWQnOiB0aGlzLm9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAnY2xpZW50X3NlY3JldCc6IHRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQsXG4gICAgICAncmVkaXJlY3RfdXJpJzogdGhpcy5vcHRpb25zLnJlZGlyZWN0VXJpXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXhjaGFuZ2VzIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgZm9yIGFuIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmcmVzaFRva2VuIC0gdGhlIG9hdXRoIHJlZnJlc2ggdG9rZW4sIHVzZWQgd2hlbiB0aGUgYWNjZXNzIHRva2VuXG4gICAqIGV4cGlyZXMgdG8gY2xhaW0gYSBuZXcgYWNjZXNzIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgcmVmcmVzaEFjY2Vzc1Rva2VuIChyZWZyZXNoVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIHJlZnJlc2hUb2tlblBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIHJldHVybiB0aGlzLmdldE9BdXRoVG9rZW4oe1xuICAgICAgJ3JlZnJlc2hfdG9rZW4nOiByZWZyZXNoVG9rZW4sXG4gICAgICAnZ3JhbnRfdHlwZSc6IFJFRlJFU0hfVE9LRU5fR1JBTlRfVFlQRSxcbiAgICAgICdjbGllbnRfaWQnOiB0aGlzLm9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAnY2xpZW50X3NlY3JldCc6IHRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgc3Rhcmxpbmcgb2F1dGggZW5kcG9pbnRcbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyAtIHRoZSBxdWVyeSBwYXJhbXMgcGFzc2VkIHRvIHRoZSBvYXV0aCBlbmRwb2ludCBhcyBwZXIgdGhlIG9hdXRoIHNwZWNcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldE9BdXRoVG9rZW4gKHBhcmFtcykge1xuICAgIGlmICghdGhpcy5vcHRpb25zLmNsaWVudElkKSB7XG4gICAgICB0aHJvdyBFcnJvcignY2xpZW50SWQgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgIHRocm93IEVycm9yKCdjbGllbnRTZWNyZXQgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMub2F1dGhVcmx9L29hdXRoL2FjY2Vzcy10b2tlbmA7XG4gICAgbG9nKGBQT1NUICR7dXJsfSBxdWVyeVBhcmFtczoke0pTT04uc3RyaW5naWZ5KHBhcmFtcyl9YCk7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgdXJsLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgIH0sXG4gICAgICBwYXJhbXM6IHBhcmFtc1xuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHJlZnJlc2hUb2tlblBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAncmVmcmVzaFRva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG5dO1xuXG5jb25zdCBhdXRob3JpemF0aW9uQ29kZVBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYXV0aG9yaXphdGlvbkNvZGUnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbl07XG5cbm1vZHVsZS5leHBvcnRzID0gT0F1dGg7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnMsIHBvc3RIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzpwYXltZW50LXNlcnZpY2UnKTtcblxuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyJ3MgdHJhbnNhY3Rpb25zXG4gKi9cbmNsYXNzIFBheW1lbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHRyYW5zYWN0aW9uIHNlcnZpY2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHBheW1lbnQgb24gYmVoYWxmIG9mIHRoZSBjdXN0b21lciB0byBhbm90aGVyIFVLIGJhbmsgYWNjb3VudCB1c2luZyB0aGUgRmFzdGVyIFBheW1lbnRzIG5ldHdvcmtcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbkFjY291bnRVaWQgLSB0aGUgYWNjb3VudCBpZGVudGlmaWVyIG9mIHRoZSByZWNpcGllbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZmVyZW5jZSAtIFRoZSBwYXltZW50IHJlZmVyZW5jZSwgbWF4LiAxOCBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYW1vdW50IC0gdGhlIGFtb3VudCB0byBiZSBzZW5kLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IGN1cnJlbmN5IC0gdGhlIGN1cnJlbmN5LCBvcHRpb25hbCwgZGVmYXVsdHMgdG8gXCJHQlBcIi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIG1ha2VMb2NhbFBheW1lbnQgKGFjY2Vzc1Rva2VuLCBkZXN0aW5hdGlvbkFjY291bnRVaWQsIHJlZmVyZW5jZSwgYW1vdW50LCBjdXJyZW5jeSkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgbWFrZUxvY2FsUGF5bWVudFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9wYXltZW50cy9sb2NhbGA7XG4gICAgbG9nKGBQT1NUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzKGFjY2Vzc1Rva2VuKSxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZGVzdGluYXRpb25BY2NvdW50VWlkLFxuICAgICAgICBwYXltZW50OiB7XG4gICAgICAgICAgYW1vdW50LFxuICAgICAgICAgIGN1cnJlbmN5XG4gICAgICAgIH0sXG4gICAgICAgIHJlZmVyZW5jZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIExpc3RzIHRoZSBjdXN0b21lcidzIHNjaGVkdWxlZCBwYXltZW50c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgbGlzdFNjaGVkdWxlZFBheW1lbnRzIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgbGlzdFNjaGVkdWxlZFBheW1lbnRzUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL3BheW1lbnRzL3NjaGVkdWxlZGA7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBtYWtlTG9jYWxQYXltZW50UGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdkZXN0aW5hdGlvbkFjY291bnRVaWQnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAncmVmZXJlbmNlJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2Ftb3VudCcsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdjdXJyZW5jeScsIHZhbGlkYXRpb25zOiBbJ29wdGlvbmFsJywgJ3N0cmluZyddfVxuXTtcblxuY29uc3QgbGlzdFNjaGVkdWxlZFBheW1lbnRzUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBQYXltZW50O1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBkZWZhdWx0SGVhZGVycywgcG9zdEhlYWRlcnMgfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7IHR5cGVWYWxpZGF0aW9uIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdG9yJztcblxuY29uc3QgbG9nID0gZGVidWcoJ3N0YXJsaW5nOnNhdmluZy1nb2Fscy1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIncyBzYXZpbmdzIGdvYWxzXG4gKi9cbmNsYXNzIFNhdmluZ3NHb2FscyB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgc2F2aW5ncyBnb2FsIHNlcnZpY2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgbGlzdCBvZiB0aGUgY3VzdG9tZXIncyBzYXZpbmdzIGdvYWxzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBsaXN0U2F2aW5nc0dvYWxzIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgbGlzdFNhdmluZ3NHb2Fsc1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9zYXZpbmdzLWdvYWxzYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzcGVjaWZpYyBzYXZpbmdzIGdvYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNhdmluZ3NHb2FsSWQgLSB0aGUgc2F2aW5ncyBnb2FsJ3MgSUQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRTYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldFNhdmluZ3NHb2FsUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL3NhdmluZ3MtZ29hbHMvJHtzYXZpbmdzR29hbElkfWA7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgc2F2aW5ncyBnb2FsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHNhdmluZ3MgZ29hbCdzIElELCBnZW5lcmF0ZSBvbmUgaWYgY3JlYXRpbmcgYSBnb2FsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbmN5IC0gdGhlIGN1cnJlbmN5IG9mIHRoZSBzYXZpbmdzIGdvYWwuIERlZmF1bHRzIHRvICdHQlAnLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0QW1vdW50IC0gdGhlIHRhcmdldCBhbW91bnQgaW4gbWlub3IgdW5pdHMgKGUuZy4gMTIzNCA9PiDCozEyLjM0KS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldEN1cnJlbmN5IC0gdGhlIHRhcmdldCBjdXJyZW5jeSwgYWxzbyBkZWZhdWx0cyB0byAnR0JQJy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NEVuY29kZWRQaG90byAtIGJhc2U2NCBlbmNvZGVkIGltYWdlIHRvIGFzc29jaWF0ZSB3aXRoIHRoZSBnb2FsLiAob3B0aW9uYWwpXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBjcmVhdGVTYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQsIG5hbWUsIGN1cnJlbmN5LCB0YXJnZXRBbW91bnQsIHRhcmdldEN1cnJlbmN5LCBiYXNlNjRFbmNvZGVkUGhvdG8pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGNyZWF0ZVNhdmluZ3NHb2FsUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL3NhdmluZ3MtZ29hbHMvJHtzYXZpbmdzR29hbElkfWA7XG4gICAgbG9nKGBQVVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBwb3N0SGVhZGVycyhhY2Nlc3NUb2tlbiksXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGN1cnJlbmN5LFxuICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICB0YXJnZXRBbW91bnQsXG4gICAgICAgICAgdGFyZ2V0Q3VycmVuY3lcbiAgICAgICAgfSxcbiAgICAgICAgYmFzZTY0RW5jb2RlZFBob3RvXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgc3BlY2lmaWMgc2F2aW5ncyBnb2FsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHVuaXF1ZSBtYW5kYXRlIElEXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBkZWxldGVTYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGRlbGV0ZVNhdmluZ3NHb2FsUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL3NhdmluZ3MtZ29hbHMvJHtzYXZpbmdzR29hbElkfWA7XG4gICAgbG9nKGBERUxFVEUgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbW9uZXkgdG8gYSBzcGVjaWZpYyBzYXZpbmdzIGdvYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNhdmluZ3NHb2FsSWQgLSB0aGUgc2F2aW5ncyBnb2FsJ3MgSUQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2FjdGlvbklkIC0gYSB0cmFuc2FjdGlvbiBJRCBmb3IgdGhpcyB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IC0gYW4gYW1vdW50IGluIG1pbm9yIHVuaXRcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGFkZE1vbmV5VG9TYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQsIHRyYW5zYWN0aW9uSWQsIGFtb3VudCwgY3VycmVuY3kpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGFkZE1vbmV5U2F2aW5nc0dvYWxQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvc2F2aW5ncy1nb2Fscy8ke3NhdmluZ3NHb2FsSWR9L2FkZC1tb25leS8ke3RyYW5zYWN0aW9uSWR9YDtcbiAgICBsb2coYFBVVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IHBvc3RIZWFkZXJzKGFjY2Vzc1Rva2VuKSxcbiAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYW1vdW50OiB7XG4gICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgbWlub3JVbml0czogYW1vdW50XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgbGlzdFNhdmluZ3NHb2Fsc1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBnZXRTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBkZWxldGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBjcmVhdGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICduYW1lJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdjdXJyZW5jeScsIHZhbGlkYXRpb25zOiBbICdyZXF1aXJlZCcsICdzdHJpbmcnIF0gfSxcbiAgeyBuYW1lOiAndGFyZ2V0QW1vdW50JywgdmFsaWRhdGlvbnM6IFsgJ29wdGlvbmFsJywgJ251bWJlcicgXSB9LFxuICB7IG5hbWU6ICd0YXJnZXRDdXJyZW5jeScsIHZhbGlkYXRpb25zOiBbICdvcHRpb25hbCcsICdzdHJpbmcnIF0gfSxcbiAgeyBuYW1lOiAnYmFzZTY0RW5jb2RlZFBob3RvJywgdmFsaWRhdGlvbnM6IFsgJ29wdGlvbmFsJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBhZGRNb25leVNhdmluZ3NHb2FsUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAgeyBuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWyAncmVxdWlyZWQnLCAnc3RyaW5nJyBdIH0sXG4gIHsgbmFtZTogJ3NhdmluZ3NHb2FsSWQnLCB2YWxpZGF0aW9uczogWyAncmVxdWlyZWQnLCAnc3RyaW5nJyBdIH0sXG4gIHsgbmFtZTogJ3RyYW5zYWN0aW9uSWQnLCB2YWxpZGF0aW9uczogWyAncmVxdWlyZWQnLCAnc3RyaW5nJyBdIH0sXG4gIHsgbmFtZTogJ2Ftb3VudCcsIHZhbGlkYXRpb25zOiBbICdyZXF1aXJlZCcsICdudW1iZXInIF0gfSxcbl07XG5cbm1vZHVsZS5leHBvcnRzID0gU2F2aW5nc0dvYWxzO1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzp0cmFuc2FjdGlvbi1zZXJ2aWNlJyk7XG5cbmNvbnN0IHRyYW5zYWN0aW9uU291cmNlID0gKHNvdXJjZSkgPT4ge1xuICBpZiAoc291cmNlID09PSAnTUFTVEVSX0NBUkQnKSB7XG4gICAgcmV0dXJuICcvbWFzdGVyY2FyZCc7XG4gIH0gZWxzZSBpZiAoc291cmNlID09PSAnRkFTVEVSX1BBWU1FTlRTX0lOJykge1xuICAgIHJldHVybiAnL2Zwcy9pbic7XG4gIH0gZWxzZSBpZiAoc291cmNlID09PSAnRkFTVEVSX1BBWU1FTlRTX09VVCcpIHtcbiAgICByZXR1cm4gJy9mcHMvb3V0JztcbiAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICdESVJFQ1RfREVCSVQnKSB7XG4gICAgcmV0dXJuICcvZGlyZWN0LWRlYml0JztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJydcbiAgfVxufTtcblxuLyoqXG4gKiBTZXJ2aWNlIHRvIGludGVyYWN0IHdpdGggYSBjdXN0b21lcidzIHRyYW5zYWN0aW9uc1xuICovXG5jbGFzcyBUcmFuc2FjdGlvbiB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgdHJhbnNhY3Rpb24gc2VydmljZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgdHJhbnNhY3Rpb25zIG92ZXIgdGhlIGdpdmVuIHBlcmlvZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZnJvbURhdGUgLSBmaWx0ZXIgdHJhbnNhY3Rpb25zIGFmdGVyIHRoaXMgZGF0ZS4gRm9ybWF0OiBZWVlZLU1NLUREXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b0RhdGUgLSBmaWx0ZXIgdHJhbnNhY3Rpb25zIGJlZm9yZSB0aGlzIGRhdGUuIEZvcm1hdDogWVlZWS1NTS1ERFxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZSAtIHRoZSB0cmFuc2FjdGlvbiB0eXBlIChlLmcuIGZhc3RlciBwYXltZW50cywgbWFzdGVyY2FyZCkuXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHJlc3VsdHMgYXJlIG5vdCBmaWx0ZXJlZCBieSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbnMgKGFjY2Vzc1Rva2VuLCBmcm9tRGF0ZSwgdG9EYXRlLCBzb3VyY2UpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldFRyYW5zYWN0aW9uc1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS90cmFuc2FjdGlvbnMke3RyYW5zYWN0aW9uU291cmNlKHNvdXJjZSl9YDtcbiAgICBsb2coYEdFVCAke3VybH0gZnJvbT0ke2Zyb21EYXRlfSB0bz0ke3RvRGF0ZX1gKTtcblxuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGZyb206IGZyb21EYXRlLFxuICAgICAgICB0bzogdG9EYXRlXG4gICAgICB9LFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZnVsbCBkZXRhaWxzIG9mIGEgc2luZ2xlIHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zYWN0aW9uSWQgLSB0aGUgdW5pcXVlIHRyYW5zYWN0aW9uIElEXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc291cmNlIC0gdGhlIHRyYW5zYWN0aW9uIHR5cGUgKGUuZy4gZmFzdGVyIHBheW1lbnRzLCBtYXN0ZXJjYXJkKS5cbiAgICogSWYgbm90IHNwZWNpZmllZCwgb25seSBnZW5lcmljIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbiAoYWNjZXNzVG9rZW4sIHRyYW5zYWN0aW9uSWQsIHNvdXJjZSkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0VHJhbnNhY3Rpb25QYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvdHJhbnNhY3Rpb25zJHt0cmFuc2FjdGlvblNvdXJjZShzb3VyY2UpfS8ke3RyYW5zYWN0aW9uSWR9YDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGdldFRyYW5zYWN0aW9uc1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnZnJvbURhdGUnLCB2YWxpZGF0aW9uczogWydvcHRpb25hbCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAndG9EYXRlJywgdmFsaWRhdGlvbnM6IFsnb3B0aW9uYWwnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ3NvdXJjZScsIHZhbGlkYXRpb25zOiBbJ29wdGlvbmFsJywgJ3N0cmluZyddfVxuXTtcblxuY29uc3QgZ2V0VHJhbnNhY3Rpb25QYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ3RyYW5zYWN0aW9uSWQnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnc291cmNlJywgdmFsaWRhdGlvbnM6IFsnb3B0aW9uYWwnLCAnc3RyaW5nJ119XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uO1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzp3aG8tYW0taS1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIHRoZSBXaG8gQW0gSSBlbmRwb2ludFxuICovXG5jbGFzcyBXaG9BbUkge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSB3aG8gYW0gSSBjbGllbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGN1c3RvbWVyIFVVSUQgYW5kIHBlcm1pc3Npb25zIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGFjY2VzcyB0b2tlbiBwYXNzZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldE1lIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0TWVQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvbWVgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRNZVBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxubW9kdWxlLmV4cG9ydHMgPSBXaG9BbUk7XG4iLCJpbXBvcnQgQ3VzdG9tZXIgZnJvbSAnLi9lbnRpdGllcy9jdXN0b21lcic7XG5pbXBvcnQgQWNjb3VudCBmcm9tICcuL2VudGl0aWVzL2FjY291bnQnO1xuaW1wb3J0IEFkZHJlc3MgZnJvbSAnLi9lbnRpdGllcy9hZGRyZXNzJztcbmltcG9ydCBUcmFuc2FjdGlvbiBmcm9tICcuL2VudGl0aWVzL3RyYW5zYWN0aW9uJztcbmltcG9ydCBDYXJkIGZyb20gJy4vZW50aXRpZXMvY2FyZCc7XG5pbXBvcnQgT0F1dGggZnJvbSAnLi9lbnRpdGllcy9vYXV0aCc7XG5pbXBvcnQgQ29udGFjdCBmcm9tICcuL2VudGl0aWVzL2NvbnRhY3QnO1xuaW1wb3J0IFBheW1lbnQgZnJvbSAnLi9lbnRpdGllcy9wYXltZW50JztcbmltcG9ydCBNYW5kYXRlIGZyb20gJy4vZW50aXRpZXMvbWFuZGF0ZSc7XG5pbXBvcnQgU2F2aW5nc0dvYWxzIGZyb20gJy4vZW50aXRpZXMvc2F2aW5nc0dvYWxzJztcbmltcG9ydCBXaG9BbUkgZnJvbSAnLi9lbnRpdGllcy93aG9BbUknO1xuXG4vKipcbiAqIEZhY2FkZSB0byBkaXNwYXRjaCBvcGVyYXRpb25zIHRvIHNlcnZpY2VzXG4gKi9cbmNsYXNzIFN0YXJsaW5nIHtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBzdGFybGluZyBjbGllbnRcbiAgICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgYXBpVXJsOiAnaHR0cHM6Ly9hcGkuc3RhcmxpbmdiYW5rLmNvbScsXG4gICAgICBvYXV0aFVybDogJ2h0dHBzOi8vb2F1dGguc3RhcmxpbmdiYW5rLmNvbScsXG4gICAgICBjbGllbnRJZDogJycsXG4gICAgICBjbGllbnRTZWNyZXQ6ICcnXG4gICAgfTtcblxuICAgIHRoaXMuY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy53aG9BbUkgPSBuZXcgV2hvQW1JKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmFjY291bnQgPSBuZXcgQWNjb3VudCh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5hZGRyZXNzID0gbmV3IEFkZHJlc3ModGhpcy5jb25maWcpO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgVHJhbnNhY3Rpb24odGhpcy5jb25maWcpO1xuICAgIHRoaXMucGF5bWVudCA9IG5ldyBQYXltZW50KHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLm1hbmRhdGUgPSBuZXcgTWFuZGF0ZSh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5jb250YWN0ID0gbmV3IENvbnRhY3QodGhpcy5jb25maWcpO1xuICAgIHRoaXMuY2FyZCA9IG5ldyBDYXJkKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnNhdmluZ3NHb2FscyA9IG5ldyBTYXZpbmdzR29hbHModGhpcy5jb25maWcpO1xuICAgIHRoaXMub0F1dGggPSBuZXcgT0F1dGgodGhpcy5jb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyIFVVSUQgYW5kIHBlcm1pc3Npb25zIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGFjY2VzcyB0b2tlbiBwYXNzZWRcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRNZSAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLndob0FtSS5nZXRNZShhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyBkZXRhaWxzXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLiBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRDdXN0b21lciAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLmN1c3RvbWVyLmdldEN1c3RvbWVyKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIGFjY291bnQgZGV0YWlsc1xuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEFjY291bnQgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50LmdldEFjY291bnQoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgYmFsYW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEJhbGFuY2UgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50LmdldEJhbGFuY2UoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgYWRkcmVzc2VzIChjdXJyZW50IGFuZCBwcmV2aW91cylcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRBZGRyZXNzZXMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5hZGRyZXNzLmdldEFkZHJlc3NlcyhhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyB0cmFuc2FjdGlvbiBoaXN0b3J5XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLiAgSWYgbm90XG4gICAqIHNwZWNpZmllZCwgdGhlIGFjY2Vzc1Rva2VuIG9uIHRoZSBvcHRpb25zIG9iamVjdCBpcyB1c2VkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZnJvbURhdGUgLSBmaWx0ZXIgdHJhbnNhY3Rpb25zIGFmdGVyIHRoaXMgZGF0ZS4gRm9ybWF0OiBZWVlZLU1NLUREIChvcHRpb25hbCxcbiAgICogICBkZWZhdWx0cyB0byBtb3N0IHJlY2VudCAxMDAgdHJhbnNhY3Rpb25zKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9EYXRlIC0gZmlsdGVyIHRyYW5zYWN0aW9ucyBiZWZvcmUgdGhpcyBkYXRlLiBGb3JtYXQ6IFlZWVktTU0tREQgKG9wdGlvbmFsLFxuICAgKiAgIGRlZmF1bHRzIHRvIGN1cnJlbnQgZGF0ZSBpZiBub3QgcHJvdmlkZWQpXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc291cmNlIC0gdGhlIHRyYW5zYWN0aW9uIHR5cGUgKGUuZy4gZmFzdGVyIHBheW1lbnRzLCBtYXN0ZXJjYXJkKS5cbiAgICogSWYgbm90IHNwZWNpZmllZCwgcmVzdWx0cyBhcmUgbm90IGZpbHRlcmVkIGJ5IHNvdXJjZS5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldFRyYW5zYWN0aW9ucyAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbiwgZnJvbURhdGUsIHRvRGF0ZSwgc291cmNlKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uZ2V0VHJhbnNhY3Rpb25zKGFjY2Vzc1Rva2VuLCBmcm9tRGF0ZSwgdG9EYXRlLCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGZ1bGwgZGV0YWlscyBvZiBhIHNpbmdsZSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zYWN0aW9uSWQgLSB0aGUgdW5pcXVlIHRyYW5zYWN0aW9uIElEXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc291cmNlIC0gdGhlIHRyYW5zYWN0aW9uIHR5cGUgKGUuZy4gZmFzdGVyIHBheW1lbnRzLCBtYXN0ZXJjYXJkKS5cbiAgICogSWYgbm90IHNwZWNpZmllZCwgb25seSBnZW5lcmljIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbiAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbiwgdHJhbnNhY3Rpb25JZCwgc291cmNlKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb24uZ2V0VHJhbnNhY3Rpb24oYWNjZXNzVG9rZW4sIHRyYW5zYWN0aW9uSWQsIHNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyBjdXJyZW50IGRpcmVjdC1kZWJpdCBtYW5kYXRlc1xuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGxpc3RNYW5kYXRlcyAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLm1hbmRhdGUubGlzdE1hbmRhdGVzKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHNwZWNpZmljIGRpcmVjdCBkZWJpdCBtYW5kYXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYW5kYXRlSWQgLSB0aGUgdW5pcXVlIG1hbmRhdGUgSURcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGRlbGV0ZU1hbmRhdGUgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIG1hbmRhdGVJZCkge1xuICAgIHJldHVybiB0aGlzLm1hbmRhdGUuZGVsZXRlTWFuZGF0ZShhY2Nlc3NUb2tlbiwgbWFuZGF0ZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgY3VzdG9tZXIncyBzY2hlZHVsZWQgcGF5bWVudHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGxpc3RTY2hlZHVsZWRQYXltZW50cyAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLnBheW1lbnQubGlzdFNjaGVkdWxlZFBheW1lbnRzKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhIHBheW1lbnQgb24gYmVoYWxmIG9mIHRoZSBjdXN0b21lciB0byBhbm90aGVyIFVLIGJhbmsgYWNjb3VudCB1c2luZyB0aGUgRmFzdGVyIFBheW1lbnRzIG5ldHdvcmtcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbkFjY291bnRVaWQgLSB0aGUgYWNjb3VudCBpZGVudGlmaWVyIG9mIHRoZSByZWNpcGllbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZmVyZW5jZSAtIFRoZSBwYXltZW50IHJlZmVyZW5jZSwgbWF4LiAxOCBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYW1vdW50IC0gdGhlIGFtb3VudCB0byBiZSBzZW5kLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IGN1cnJlbmN5IC0gdGhlIGN1cnJlbmN5LCBvcHRpb25hbCwgZGVmYXVsdHMgdG8gXCJHQlBcIi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIG1ha2VMb2NhbFBheW1lbnQgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIGRlc3RpbmF0aW9uQWNjb3VudFVpZCwgcmVmZXJlbmNlLCBhbW91bnQsIGN1cnJlbmN5ID0gJ0dCUCcpIHtcbiAgICByZXR1cm4gdGhpcy5wYXltZW50Lm1ha2VMb2NhbFBheW1lbnQoYWNjZXNzVG9rZW4sIGRlc3RpbmF0aW9uQWNjb3VudFVpZCwgcmVmZXJlbmNlLCBhbW91bnQsIGN1cnJlbmN5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIGNvbnRhY3RzIChwYXllZXMpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRDb250YWN0cyAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3QuZ2V0Q29udGFjdHMoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzcGVjaWZpYyBjb250YWN0IChwYXllZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhY3RJZCAtIHRoZSBjb250YWN0J3MgSUQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRDb250YWN0QWNjb3VudCAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbiwgY29udGFjdElkKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdC5nZXRDb250YWN0QWNjb3VudChhY2Nlc3NUb2tlbiwgY29udGFjdElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29udGFjdCAocGF5ZWUpIGZvciB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gYWNjb3VudFR5cGUgLSB0aGUgYWNjb3VudCB0eXBlIChkb21lc3RpYyBvciBpbnRlcm5hdGlvbmFsKSwgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvXG4gICAqICAgVUtfQUNDT1VOVF9BTkRfU09SVF9DT0RFLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjb3VudE51bWJlciAtIHRoZSBjb250YWN0J3MgYmFuayBhY2NvdW50IG51bWJlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNvcnRDb2RlIC0gdGhlIGNvbnRhY3QncyBzb3J0IGNvZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXN0b21lcklkIC0gdGhlIGN1c3RvbWVyJ3MgSUQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBjcmVhdGVDb250YWN0IChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBuYW1lLCBhY2NvdW50VHlwZSA9ICdVS19BQ0NPVU5UX0FORF9TT1JUX0NPREUnLCBhY2NvdW50TnVtYmVyLCBzb3J0Q29kZSwgY3VzdG9tZXJJZCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3QuY3JlYXRlQ29udGFjdChhY2Nlc3NUb2tlbiwgbmFtZSwgYWNjb3VudFR5cGUsIGFjY291bnROdW1iZXIsIHNvcnRDb2RlLCBjdXN0b21lcklkKTtcbiAgfVxuXG4gIGRlbGV0ZUNvbnRhY3QgKGFjY2Vzc1Rva2VuLCBjb250YWN0SWQpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWN0LmRlbGV0ZUNvbnRhY3QoYWNjZXNzVG9rZW4sIGNvbnRhY3RJZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGxpc3Qgb2YgdGhlIGN1c3RvbWVyJ3Mgc2F2aW5ncyBnb2Fsc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgbGlzdFNhdmluZ3NHb2FscyAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB0aGlzLnNhdmluZ3NHb2Fscy5saXN0U2F2aW5nc0dvYWxzKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgc3BlY2lmaWMgc2F2aW5ncyBnb2FsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHNhdmluZ3MgZ29hbCdzIElELlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0U2F2aW5nc0dvYWwgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuZ2V0U2F2aW5nc0dvYWwoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBtb25leSB0byBhIHNwZWNpZmljIHNhdmluZ3MgZ29hbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2F2aW5nc0dvYWxJZCAtIHRoZSBzYXZpbmdzIGdvYWwncyBJRC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zYWN0aW9uSWQgLSBhIHRyYW5zYWN0aW9uIElEIGZvciB0aGlzIHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgLSBhbiBhbW91bnQgaW4gbWlub3IgdW5pdFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgYWRkTW9uZXlUb1NhdmluZ3NHb2FsIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkLCB0cmFuc2FjdGlvbklkLCBhbW91bnQsIGN1cnJlbmN5ID0gJ0dCUCcpIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuYWRkTW9uZXlUb1NhdmluZ3NHb2FsKFxuICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICBzYXZpbmdzR29hbElkLFxuICAgICAgdHJhbnNhY3Rpb25JZCxcbiAgICAgIGFtb3VudCxcbiAgICAgIGN1cnJlbmN5XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29udGFjdCAocGF5ZWUpIGZvciB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNhdmluZ3NHb2FsSWQgLSB0aGUgc2F2aW5ncyBnb2FsJ3MgSUQsIGdlbmVyYXRlIG9uZSBpZiBjcmVhdGluZyBhIGdvYWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVuY3kgLSB0aGUgY3VycmVuY3kgb2YgdGhlIHNhdmluZ3MgZ29hbC4gRGVmYXVsdHMgdG8gJ0dCUCcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRBbW91bnQgLSB0aGUgdGFyZ2V0IGFtb3VudCBpbiBtaW5vciB1bml0cyAoZS5nLiAxMjM0ID0+IMKjMTIuMzQpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0Q3VycmVuY3kgLSB0aGUgdGFyZ2V0IGN1cnJlbmN5LCBhbHNvIGRlZmF1bHRzIHRvICdHQlAnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0RW5jb2RlZFBob3RvIC0gYmFzZTY0IGVuY29kZWQgaW1hZ2UgdG8gYXNzb2NpYXRlIHdpdGggdGhlIGdvYWwuIChvcHRpb25hbClcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGNyZWF0ZVNhdmluZ3NHb2FsIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkLCBuYW1lLCBjdXJyZW5jeSA9ICdHQlAnLCAgdGFyZ2V0QW1vdW50LCB0YXJnZXRDdXJyZW5jeSA9ICdHQlAnLCBiYXNlNjRFbmNvZGVkUGhvdG8pIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuY3JlYXRlU2F2aW5nc0dvYWwoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQsIG5hbWUsIGN1cnJlbmN5LCAgdGFyZ2V0QW1vdW50LCB0YXJnZXRDdXJyZW5jeSwgYmFzZTY0RW5jb2RlZFBob3RvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHNwZWNpZmljIGRpcmVjdCBkZWJpdCBtYW5kYXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHVuaXF1ZSBtYW5kYXRlIElEXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBkZWxldGVTYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuZGVsZXRlU2F2aW5nc0dvYWwoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgY2FyZFxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldENhcmQgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkLmdldENhcmQoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4Y2hhbmdlcyB0aGUgYXV0aG9yaXphdGlvbiBjb2RlIGZvciBhbiBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml6YXRpb25Db2RlIC0gdGhlIGF1dGhvcml6YXRpb24gY29kZSwgYWNxdWlyZWQgZnJvbSB0aGUgdXNlciBhZ2VudCBhZnRlciB0aGVcbiAgICogdXNlciBhdXRoZW50aWNhdGVzIHdpdGggc3RhcmxpbmdcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEFjY2Vzc1Rva2VuIChhdXRob3JpemF0aW9uQ29kZSkge1xuICAgIHJldHVybiB0aGlzLm9BdXRoLmdldEFjY2Vzc1Rva2VuKGF1dGhvcml6YXRpb25Db2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGNoYW5nZXMgdGhlIGF1dGhvcml6YXRpb24gY29kZSBmb3IgYW4gYWNjZXNzIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWZyZXNoVG9rZW4gLSB0aGUgb2F1dGggcmVmcmVzaCB0b2tlbiwgdXNlZCB0byBjbGFpbSBhIG5ldyBhY2Nlc3MgdG9rZW4gd2hlbiB0aGUgYWNjZXNzIHRva2VuXG4gICAqIGV4cGlyZXMuIEEgbmV3IHJlZnJlc2ggdG9rZW4gaXMgYWxzbyByZXR1cm5lZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIHJlZnJlc2hBY2Nlc3NUb2tlbiAocmVmcmVzaFRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMub0F1dGgucmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hUb2tlbik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGFybGluZztcbiIsImV4cG9ydCBjb25zdCBkZWZhdWx0SGVhZGVycyA9IChhY2Nlc3NUb2tlbikgPT4ge1xuICByZXR1cm4ge1xuICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgcG9zdEhlYWRlcnMgPSAoYWNjZXNzVG9rZW4pID0+IHtcbiAgcmV0dXJuIHtcbiAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXG4gIH07XG59OyIsIlxuY29uc3QgcnVuUnVsZXMgPSAocG9zLCBuYW1lLCBydWxlcywgdmFsdWUpID0+IHtcbiAgY29uc3QgdmFsdWVUeXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gIGlmIChydWxlc1swXSA9PSAnb3B0aW9uYWwnKSB7XG4gICAgaWYgKHZhbHVlICYmICh2YWx1ZVR5cGUgIT09IHJ1bGVzWzFdKSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYW4gb3B0aW9uYWwgJHtydWxlc1sxXX0gYnV0IHdhcyAke3ZhbHVlVHlwZX1gXG4gICAgfVxuICB9XG4gIGlmIChydWxlc1swXSA9PSAncmVxdWlyZWQnKSB7XG4gICAgaWYgKHZhbHVlICYmICh2YWx1ZVR5cGUgIT09IHJ1bGVzWzFdKSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYSByZXF1aXJlZCAke3J1bGVzWzFdfSBidXQgd2FzICR7dmFsdWVUeXBlfWBcbiAgICB9IGVsc2UgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYSByZXF1aXJlZCAke3J1bGVzWzFdfSBidXQgd2FzICR7dmFsdWV9YFxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0ICB0eXBlVmFsaWRhdGlvbiA9IChhcmdzLCBkZWYpID0+IHtcbiAgbGV0IHByb2JsZW1zID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcG9zID0gaTtcbiAgICBjb25zdCBuYW1lID0gZGVmW2ldLm5hbWU7XG4gICAgY29uc3QgcnVsZXMgPSBkZWZbaV0udmFsaWRhdGlvbnM7XG4gICAgY29uc3QgdmFsdWUgPSBpIDw9IGFyZ3MubGVuZ3RoID8gYXJnc1tpXSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9ibGVtID0gcnVuUnVsZXMocG9zLCBuYW1lLCBydWxlcywgdmFsdWUpO1xuICAgIGlmIChwcm9ibGVtKSBwcm9ibGVtcy5wdXNoKHByb2JsZW0pO1xuICB9XG5cbiAgaWYgKHByb2JsZW1zLmxlbmd0aCkge1xuICAgIHRocm93IHByb2JsZW1zO1xuICB9XG5cbn07XG5cbiJdfQ=="}